package BusinessLogic.Entities;

public class BNHLarva extends BNHormiga {

    public BNHLarva() {
        super();
        this.bnTipo = "Larva";
        this.bnSexo = "Asexual"; 
    }

    @Override
    public void comer(IngestaNativa alimento) {
        System.out.println("La Larva está comiendo " + alimento.toString());

        if (alimento.toString().equals("Carnivoro") || alimento instanceof Carnivoro) {
            
            System.out.println("¡La Larva ha comido CARNE! Comienza la metamorfosis...");
            this.evolucionarASoldado(alimento);
            
        } else {
            System.out.println("... La Larva se alimenta, pero sigue siendo Larva.");
        }
    }

    private void evolucionarASoldado(IngestaNativa alimento) {
        this.bnTipo = "Soldado";
        this.bnSexo = "Macho"; 

        if (alimento instanceof Alimento) {
            Alimento comida = (Alimento) alimento;
            GenoAlimento genoma = comida.getGenoAlimento(); 
            
            if (genoma != null && genoma.toString().equals("XX")) {
                System.out.println("¡GENOMA XX DETECTADO! (Macho)");
                System.out.println("La hormiga ha adquirido SUPERSALTO (SuperHabilidad)");
            }
        }

        if (this.guardar()) {
            System.out.println("Evolución guardada en Base de Datos: Ahora es un SOLDADO MACHO.");
        } else {
            System.out.println("Error al guardar la evolución en la BD.");
        }
    }
}
